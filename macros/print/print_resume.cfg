[gcode_macro PAUSE]
rename_existing: BASE_PAUSE
description: Pause the print and park
gcode:
    SAVE_GCODE_STATE NAME=PAUSE_state
    BASE_PAUSE
    LEDS_ON
    SET_PIN PIN=LED_Bar VALUE=1.0 
    PARK

[gcode_macro RESUME]
rename_existing: BASE_RESUME
description: Resume the print after an optional unretract
gcode:
    {% set E = params.E|default(1.7)|float %}

    G1 E{E} F2100
    RESTORE_GCODE_STATE NAME=PAUSE_state
    LEDS_OFF
    SET_PIN PIN=LED_Bar VALUE=0.0
    BASE_RESUME