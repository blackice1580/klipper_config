[gcode_shell_command Belt_Graph]
command: sh /home/pi/klipper/scripts/belt_resonances.sh
timeout: 120.0
verbose: True

[gcode_macro Belt_Resonances]
gcode:
  {% if not 'xyz' in printer.toolhead.homed_axes %}
    G28
  {% endif %}   
  TEST_RESONANCES AXIS=1,1 OUTPUT=raw_data
  TEST_RESONANCES AXIS=1,-1 OUTPUT=raw_data
  G4 P10000
  M84
  RUN_SHELL_COMMAND CMD=Belt_Graph

[gcode_macro Belt_Graph]
gcode:
  RUN_SHELL_COMMAND CMD=Belt_Graph


[gcode_shell_command Shaper_Graph]
command: sh /home/pi/klipper/scripts/shaper_graph.sh
timeout: 120.0
verbose: True

[gcode_macro Shaper_Graph]
gcode:
  RUN_SHELL_COMMAND CMD=Shaper_Graph

[gcode_macro Shaper_Resonances]
gcode:
  {% if not 'xyz' in printer.toolhead.homed_axes %}
    G28
  {% endif %}   
  TEST_RESONANCES AXIS=X
  TEST_RESONANCES AXIS=Y
  G4 P10000
  M84
  RUN_SHELL_COMMAND CMD=Shaper_Graph


